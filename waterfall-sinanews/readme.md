## 瀑布流新闻网站
[预览地址](https://lin-ya.github.io/Project/waterfall-sinanews/index.html)

### 懒加载原理
如果一个页面有很多图片，用传统的方法来制作，那么浏览器就要在载入的过程中一次性发送很多请求，就会导致浏览器要等待响应。如果有200张图片，就要等很久，降低了用户体验。

图片懒加载，本质上是化解浏览器的压力，选择不一次性加载全部，而是加载一部分，当用户看完了以后再选择发送请求继续加载一部分。

### 瀑布流原理
瀑布流布局由多列宽度一致的区块按照一定的间隙排列而成，每个区块长度不一。实现瀑布流布局可以通过js配合css完成。区块均为绝对定位，通过js来安排区块的位置。

1\. 页面载入的时候，首先获取区块的父元素的宽度，由此计算得出列数是多少。（区块父元素的宽度 / 区块的宽度 = 列数（向下取整数））

2\. 声明变量colHeightArray来存储每一列的高度，默认都为0；

3\. 区块的排列位置永远排在当前高度最低的那一列中，也就是说每次排放区块的时候，都会先比较每一列的高度和最低高度，如果有变化则更新index，如果没有变化则获取最低高度的那一列的index。

4\. 区块的top值为最低高度的值，left值为最低高度的index * 区块的宽度。（使用outerWidth(),因为这个是包含区块的padding）

### 实现原理
本瀑布流新闻网站主要是结合了懒加载和瀑布流布局，实现原理与上述两者相同，但需要留意一下几点：
- 瀑布流布局的时机。只有在图片完成加载以后再进行瀑布流布局，这样才能准确获取得到每一个区块的高度，否则会出现图片重叠的情况。
- 注意请求频率。当滚动到底部或者最后一个区块出现在页面上的时候就会产生发送请求，但通过设置只有在上一次数据得到响应以后才允许发起下一次请求。
